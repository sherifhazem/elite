{"timestamp": null, "level": "INFO", "message": "request_cycle", "request_id": "f3519774ea074ca68ad7c2e9e99b9651", "trace_id": "989bff6462904e3fad45d682e8cab927", "parent_id": null, "user_id": null, "path": "/api/usage-codes/verify", "method": "POST", "incoming_payload": {"json": {"offer_id": 4, "code": "76662"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "29", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 4, "code": "76662"}}, "normalized_payload": {"json": {"offer_id": 4, "code": "76662"}, "form": {}, "query": {}, "combined": {"offer_id": 4, "code": "76662"}, "normalization": []}, "cleaned_payload": {"offer_id": 4, "code": "76662", "__original": {"json": {"offer_id": 4, "code": "76662"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "29", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 4, "code": "76662"}}, "__normalized": {"json": {"offer_id": 4, "code": "76662"}, "form": {}, "query": {}, "combined": {"offer_id": 4, "code": "76662"}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": ["json"]}}, "outgoing_payload": {"status_code": 200, "json": {"ok": false, "reason": "inactive_partner", "result": "not_eligible"}, "error": null, "redirect": null, "response_size": 78}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_finalize_logging", "line": 118, "message": "after_request:response_ready"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/api/usage-codes/verify"}, "normalization": [], "timing": {"total_ms": 43, "middleware_ms": 29, "service_ms": 0, "route_ms": 13}, "response_status": 200, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-13T14:10:04.133432Z", "level": "INFO", "message": "192.168.10.41 - - [13/Jan/2026 17:10:04] \"POST /api/usage-codes/verify HTTP/1.1\" 200 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "INFO", "message": "request_cycle", "request_id": "42859602441e479f94ab122373e10286", "trace_id": "efe71678b96545a7bd63db4d3a7f6866", "parent_id": null, "user_id": null, "path": "/api/usage-codes/verify", "method": "POST", "incoming_payload": {"json": {"offer_id": 4, "code": "22222"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "29", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 4, "code": "22222"}}, "normalized_payload": {"json": {"offer_id": 4, "code": "22222"}, "form": {}, "query": {}, "combined": {"offer_id": 4, "code": "22222"}, "normalization": []}, "cleaned_payload": {"offer_id": 4, "code": "22222", "__original": {"json": {"offer_id": 4, "code": "22222"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "29", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 4, "code": "22222"}}, "__normalized": {"json": {"offer_id": 4, "code": "22222"}, "form": {}, "query": {}, "combined": {"offer_id": 4, "code": "22222"}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": ["json"]}}, "outgoing_payload": {"status_code": 200, "json": {"message": "Code is invalid.", "ok": false, "result": "invalid"}, "error": null, "redirect": null, "response_size": 74}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_finalize_logging", "line": 118, "message": "after_request:response_ready"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/api/usage-codes/verify"}, "normalization": [], "timing": {"total_ms": 38, "middleware_ms": 30, "service_ms": 0, "route_ms": 8}, "response_status": 200, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-13T14:10:14.023271Z", "level": "INFO", "message": "192.168.10.41 - - [13/Jan/2026 17:10:14] \"POST /api/usage-codes/verify HTTP/1.1\" 200 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "INFO", "message": "request_cycle", "request_id": "168209cc65224da2a54c84f94a57fcd8", "trace_id": "ddfae9c1e93c46f0b2c4fb3760f94908", "parent_id": null, "user_id": null, "path": "/company/usage-codes/generate", "method": "POST", "incoming_payload": {"json": {}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "2", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/company/usage-codes", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9,ar;q=0.8"}, "combined": {}}, "normalized_payload": {"json": {}, "form": {}, "query": {}, "combined": {}, "normalization": []}, "cleaned_payload": {"__original": {"json": {}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "2", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/company/usage-codes", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9,ar;q=0.8"}, "combined": {}}, "__normalized": {"json": {}, "form": {}, "query": {}, "combined": {}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": []}}, "outgoing_payload": {"status_code": 201, "json": {"code": "51401", "expires_at": "2026-01-13T14:15:25.335814", "max_uses_per_window": 5, "usage_count": 0}, "error": null, "redirect": null, "response_size": 116}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_finalize_logging", "line": 118, "message": "after_request:response_ready"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/company/usage-codes/generate"}, "normalization": [], "timing": {"total_ms": 42, "middleware_ms": 30, "service_ms": 0, "route_ms": 13}, "response_status": 201, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-13T14:10:25.352476Z", "level": "INFO", "message": "192.168.10.2 - - [13/Jan/2026 17:10:25] \"\u001b[35m\u001b[1mPOST /company/usage-codes/generate HTTP/1.1\u001b[0m\" 201 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "INFO", "message": "request_cycle", "request_id": "a5ddc855b2424a6a8c8c085b16c98bdf", "trace_id": "10927d98651b4b968f4a2e8b66ffc366", "parent_id": null, "user_id": null, "path": "/api/usage-codes/verify", "method": "POST", "incoming_payload": {"json": {"offer_id": 4, "code": "51401"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "29", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 4, "code": "51401"}}, "normalized_payload": {"json": {"offer_id": 4, "code": "51401"}, "form": {}, "query": {}, "combined": {"offer_id": 4, "code": "51401"}, "normalization": []}, "cleaned_payload": {"offer_id": 4, "code": "51401", "__original": {"json": {"offer_id": 4, "code": "51401"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "29", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 4, "code": "51401"}}, "__normalized": {"json": {"offer_id": 4, "code": "51401"}, "form": {}, "query": {}, "combined": {"offer_id": 4, "code": "51401"}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": ["json"]}}, "outgoing_payload": {"status_code": 200, "json": {"ok": false, "reason": "inactive_partner", "result": "not_eligible"}, "error": null, "redirect": null, "response_size": 78}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_finalize_logging", "line": 118, "message": "after_request:response_ready"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/api/usage-codes/verify"}, "normalization": [], "timing": {"total_ms": 47, "middleware_ms": 30, "service_ms": 0, "route_ms": 17}, "response_status": 200, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-13T14:10:34.085628Z", "level": "INFO", "message": "192.168.10.41 - - [13/Jan/2026 17:10:34] \"POST /api/usage-codes/verify HTTP/1.1\" 200 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "INFO", "message": "request_cycle", "request_id": "61b7865e0047435986c45010b3ab8207", "trace_id": "cc00f11ec92e42f586eff942ecaae539", "parent_id": null, "user_id": null, "path": "/company/offers", "method": "GET", "incoming_payload": {"json": null, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Upgrade-Insecure-Requests": "1", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7", "Referer": "http://192.168.10.31:5000/company/usage-codes", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9,ar;q=0.8"}, "combined": {}}, "normalized_payload": {"json": {}, "form": {}, "query": {}, "combined": {}, "normalization": []}, "cleaned_payload": {"__original": {"json": null, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Upgrade-Insecure-Requests": "1", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7", "Referer": "http://192.168.10.31:5000/company/usage-codes", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9,ar;q=0.8"}, "combined": {}}, "__normalized": {"json": {}, "form": {}, "query": {}, "combined": {}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": []}}, "outgoing_payload": {"status_code": 200, "json": null, "error": null, "redirect": null, "response_size": 20700}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_finalize_logging", "line": 118, "message": "after_request:response_ready"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/company/offers"}, "normalization": [], "timing": {"total_ms": 102, "middleware_ms": 29, "service_ms": 0, "route_ms": 72}, "response_status": 200, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-13T14:10:40.567641Z", "level": "INFO", "message": "192.168.10.2 - - [13/Jan/2026 17:10:40] \"GET /company/offers HTTP/1.1\" 200 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "INFO", "message": "request_cycle", "request_id": "d0da2d2e4d594d0e9b71b40351aa0eda", "trace_id": "432110961be04a988122e5678149f31b", "parent_id": null, "user_id": null, "path": "/company/usage-codes", "method": "GET", "incoming_payload": {"json": null, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Upgrade-Insecure-Requests": "1", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7", "Referer": "http://192.168.10.31:5000/company/offers", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9,ar;q=0.8"}, "combined": {}}, "normalized_payload": {"json": {}, "form": {}, "query": {}, "combined": {}, "normalization": []}, "cleaned_payload": {"__original": {"json": null, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Upgrade-Insecure-Requests": "1", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7", "Referer": "http://192.168.10.31:5000/company/offers", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9,ar;q=0.8"}, "combined": {}}, "__normalized": {"json": {}, "form": {}, "query": {}, "combined": {}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": []}}, "outgoing_payload": {"status_code": 200, "json": null, "error": null, "redirect": null, "response_size": 9347}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_finalize_logging", "line": 118, "message": "after_request:response_ready"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/company/usage-codes"}, "normalization": [], "timing": {"total_ms": 46, "middleware_ms": 29, "service_ms": 0, "route_ms": 16}, "response_status": 200, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-13T14:10:46.730471Z", "level": "INFO", "message": "192.168.10.2 - - [13/Jan/2026 17:10:46] \"GET /company/usage-codes HTTP/1.1\" 200 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "INFO", "message": "request_cycle", "request_id": "25bfd6c6b0df4f8394ccc6cd0d03eda2", "trace_id": "176ee924d84c4fa9a52323e86de8dfd3", "parent_id": null, "user_id": null, "path": "/company/usage-codes/generate", "method": "POST", "incoming_payload": {"json": {}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "2", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/company/usage-codes", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9,ar;q=0.8"}, "combined": {}}, "normalized_payload": {"json": {}, "form": {}, "query": {}, "combined": {}, "normalization": []}, "cleaned_payload": {"__original": {"json": {}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "2", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/company/usage-codes", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9,ar;q=0.8"}, "combined": {}}, "__normalized": {"json": {}, "form": {}, "query": {}, "combined": {}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": []}}, "outgoing_payload": {"status_code": 201, "json": {"code": "33697", "expires_at": "2026-01-13T14:15:47.973925", "max_uses_per_window": 5, "usage_count": 0}, "error": null, "redirect": null, "response_size": 116}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_finalize_logging", "line": 118, "message": "after_request:response_ready"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/company/usage-codes/generate"}, "normalization": [], "timing": {"total_ms": 46, "middleware_ms": 30, "service_ms": 0, "route_ms": 16}, "response_status": 201, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-13T14:10:47.992402Z", "level": "INFO", "message": "192.168.10.2 - - [13/Jan/2026 17:10:47] \"\u001b[35m\u001b[1mPOST /company/usage-codes/generate HTTP/1.1\u001b[0m\" 201 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "INFO", "message": "request_cycle", "request_id": "2693a99812304c788c95420a884cf6e9", "trace_id": "54e434175b5944b3b2f4c6ad9cad850e", "parent_id": null, "user_id": null, "path": "/api/usage-codes/verify", "method": "POST", "incoming_payload": {"json": {"offer_id": 3, "code": "33697"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "29", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 3, "code": "33697"}}, "normalized_payload": {"json": {"offer_id": 3, "code": "33697"}, "form": {}, "query": {}, "combined": {"offer_id": 3, "code": "33697"}, "normalization": []}, "cleaned_payload": {"offer_id": 3, "code": "33697", "__original": {"json": {"offer_id": 3, "code": "33697"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "29", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 3, "code": "33697"}}, "__normalized": {"json": {"offer_id": 3, "code": "33697"}, "form": {}, "query": {}, "combined": {"offer_id": 3, "code": "33697"}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": ["json"]}}, "outgoing_payload": {"status_code": 200, "json": {"ok": false, "reason": "inactive_partner", "result": "not_eligible"}, "error": null, "redirect": null, "response_size": 78}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_finalize_logging", "line": 118, "message": "after_request:response_ready"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/api/usage-codes/verify"}, "normalization": [], "timing": {"total_ms": 42, "middleware_ms": 29, "service_ms": 0, "route_ms": 13}, "response_status": 200, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-13T14:10:53.317722Z", "level": "INFO", "message": "192.168.10.41 - - [13/Jan/2026 17:10:53] \"POST /api/usage-codes/verify HTTP/1.1\" 200 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-13T14:13:58.389008Z", "level": "INFO", "message": " * Detected change in 'e:\\\\hazem\\\\programing\\\\python\\\\projects\\\\ELITE\\\\app\\\\services\\\\incentive_eligibility_service.py', reloading", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-13T14:13:58.685881Z", "level": "INFO", "message": " * Restarting with stat", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-13T14:14:00.266110Z", "level": "WARNING", "message": " * Debugger is active!", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-13T14:14:00.272472Z", "level": "INFO", "message": " * Debugger PIN: 543-309-143", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "INFO", "message": "request_cycle", "request_id": "90f92e88d4c84909a431360aa3049efd", "trace_id": "d2b54fce1b704484b2d9f5f0f2463725", "parent_id": null, "user_id": null, "path": "/company/usage-codes/generate", "method": "POST", "incoming_payload": {"json": {}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "2", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/company/usage-codes", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9,ar;q=0.8"}, "combined": {}}, "normalized_payload": {"json": {}, "form": {}, "query": {}, "combined": {}, "normalization": []}, "cleaned_payload": {"__original": {"json": {}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "2", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/company/usage-codes", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9,ar;q=0.8"}, "combined": {}}, "__normalized": {"json": {}, "form": {}, "query": {}, "combined": {}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": []}}, "outgoing_payload": {"status_code": 201, "json": {"code": "41081", "expires_at": "2026-01-13T14:20:10.379886", "max_uses_per_window": 5, "usage_count": 0}, "error": null, "redirect": null, "response_size": 116}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_finalize_logging", "line": 118, "message": "after_request:response_ready"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/company/usage-codes/generate"}, "normalization": [], "timing": {"total_ms": 503, "middleware_ms": 265, "service_ms": 0, "route_ms": 46}, "response_status": 201, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-13T14:15:10.417185Z", "level": "INFO", "message": "192.168.10.2 - - [13/Jan/2026 17:15:10] \"\u001b[35m\u001b[1mPOST /company/usage-codes/generate HTTP/1.1\u001b[0m\" 201 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "ERROR", "message": "request_cycle", "request_id": "fa7887828c21413084f63c29ac30f474", "trace_id": "06d0de51dcd141ec8dedfa1c369b9f03", "parent_id": null, "user_id": null, "path": "/api/usage-codes/verify", "method": "POST", "incoming_payload": {"json": {"offer_id": 3, "code": "41081"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "29", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 3, "code": "41081"}}, "normalized_payload": {"json": {"offer_id": 3, "code": "41081"}, "form": {}, "query": {}, "combined": {"offer_id": 3, "code": "41081"}, "normalization": []}, "cleaned_payload": {"offer_id": 3, "code": "41081", "__original": {"json": {"offer_id": 3, "code": "41081"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "29", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 3, "code": "41081"}}, "__normalized": {"json": {"offer_id": 3, "code": "41081"}, "form": {}, "query": {}, "combined": {"offer_id": 3, "code": "41081"}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": ["json"]}}, "outgoing_payload": {"status_code": 500, "json": {"message": "Query.filter() got an unexpected keyword argument 'member_id'", "request_id": "fa7887828c21413084f63c29ac30f474"}, "error": {"message": "Query.filter() got an unexpected keyword argument 'member_id'", "request_id": "fa7887828c21413084f63c29ac30f474"}, "redirect": null, "response_size": 133}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_capture_exception", "line": 142, "message": "error_handler"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/api/usage-codes/verify"}, "normalization": [], "timing": {"total_ms": 65, "middleware_ms": 27, "service_ms": 0, "route_ms": 35}, "response_status": 500, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-13T14:15:21.373970Z", "level": "INFO", "message": "192.168.10.41 - - [13/Jan/2026 17:15:21] \"\u001b[35m\u001b[1mPOST /api/usage-codes/verify HTTP/1.1\u001b[0m\" 500 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "ERROR", "message": "request_cycle", "request_id": "fd0b730849a34bb7a9fb0275aaf54292", "trace_id": "f6b3d03ab7044a01bdf7b4e1261c9e9b", "parent_id": null, "user_id": null, "path": "/api/usage-codes/verify", "method": "POST", "incoming_payload": {"json": {"offer_id": 3, "code": "41081"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "29", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 3, "code": "41081"}}, "normalized_payload": {"json": {"offer_id": 3, "code": "41081"}, "form": {}, "query": {}, "combined": {"offer_id": 3, "code": "41081"}, "normalization": []}, "cleaned_payload": {"offer_id": 3, "code": "41081", "__original": {"json": {"offer_id": 3, "code": "41081"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "29", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 3, "code": "41081"}}, "__normalized": {"json": {"offer_id": 3, "code": "41081"}, "form": {}, "query": {}, "combined": {"offer_id": 3, "code": "41081"}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": ["json"]}}, "outgoing_payload": {"status_code": 500, "json": {"message": "Query.filter() got an unexpected keyword argument 'member_id'", "request_id": "fd0b730849a34bb7a9fb0275aaf54292"}, "error": {"message": "Query.filter() got an unexpected keyword argument 'member_id'", "request_id": "fd0b730849a34bb7a9fb0275aaf54292"}, "redirect": null, "response_size": 133}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_capture_exception", "line": 142, "message": "error_handler"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/api/usage-codes/verify"}, "normalization": [], "timing": {"total_ms": 40, "middleware_ms": 27, "service_ms": 0, "route_ms": 9}, "response_status": 500, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-13T14:15:25.116444Z", "level": "INFO", "message": "192.168.10.41 - - [13/Jan/2026 17:15:25] \"\u001b[35m\u001b[1mPOST /api/usage-codes/verify HTTP/1.1\u001b[0m\" 500 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-13T14:20:25.505947Z", "level": "INFO", "message": " * Detected change in 'e:\\\\hazem\\\\programing\\\\python\\\\projects\\\\ELITE\\\\app\\\\services\\\\usage_code_service.py', reloading", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-13T14:20:25.760281Z", "level": "INFO", "message": " * Restarting with stat", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-13T14:20:27.314950Z", "level": "WARNING", "message": " * Debugger is active!", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-13T14:20:27.320496Z", "level": "INFO", "message": " * Debugger PIN: 543-309-143", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-14T05:47:10.439536Z", "level": "INFO", "message": "\u001b[31m\u001b[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.\u001b[0m\n * Running on all addresses (0.0.0.0)\n * Running on http://127.0.0.1:5000\n * Running on http://192.168.10.31:5000", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-14T05:47:10.439536Z", "level": "INFO", "message": "\u001b[33mPress CTRL+C to quit\u001b[0m", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-14T05:47:10.442586Z", "level": "INFO", "message": " * Restarting with stat", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-14T05:47:12.022303Z", "level": "WARNING", "message": " * Debugger is active!", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": "2026-01-14T05:47:12.028301Z", "level": "INFO", "message": " * Debugger PIN: 543-309-143", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "INFO", "message": "request_cycle", "request_id": "9bc757d3a50b4c2d811134020dc60d85", "trace_id": "ddf4d8ccb64f4e3e9bd02f5aaaefe11a", "parent_id": null, "user_id": null, "path": "/company/usage-codes/generate", "method": "POST", "incoming_payload": {"json": {}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "2", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/company/usage-codes", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9,ar;q=0.8"}, "combined": {}}, "normalized_payload": {"json": {}, "form": {}, "query": {}, "combined": {}, "normalization": []}, "cleaned_payload": {"__original": {"json": {}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "2", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/company/usage-codes", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9,ar;q=0.8"}, "combined": {}}, "__normalized": {"json": {}, "form": {}, "query": {}, "combined": {}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": []}}, "outgoing_payload": {"status_code": 201, "json": {"code": "1742", "expires_at": "2026-01-14T05:52:14.020990", "max_uses_per_window": 5, "usage_count": 0}, "error": null, "redirect": null, "response_size": 115}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_finalize_logging", "line": 118, "message": "after_request:response_ready"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/company/usage-codes/generate"}, "normalization": [], "timing": {"total_ms": 499, "middleware_ms": 256, "service_ms": 0, "route_ms": 46}, "response_status": 201, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-14T05:47:14.059138Z", "level": "INFO", "message": "192.168.10.2 - - [14/Jan/2026 08:47:14] \"\u001b[35m\u001b[1mPOST /company/usage-codes/generate HTTP/1.1\u001b[0m\" 201 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "ERROR", "message": "request_cycle", "request_id": "7e2c36c5714a4201b18206c9c6eb9fc5", "trace_id": "f40d067c79834279a0025ab18b2a21b6", "parent_id": null, "user_id": null, "path": "/api/usage-codes/verify", "method": "POST", "incoming_payload": {"json": {"offer_id": 3, "code": "1742"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "28", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 3, "code": "1742"}}, "normalized_payload": {"json": {"offer_id": 3, "code": "1742"}, "form": {}, "query": {}, "combined": {"offer_id": 3, "code": "1742"}, "normalization": []}, "cleaned_payload": {"offer_id": 3, "code": "1742", "__original": {"json": {"offer_id": 3, "code": "1742"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "28", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 3, "code": "1742"}}, "__normalized": {"json": {"offer_id": 3, "code": "1742"}, "form": {}, "query": {}, "combined": {"offer_id": 3, "code": "1742"}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": ["json"]}}, "outgoing_payload": {"status_code": 500, "json": {"message": "(psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join\n\n[SQL: SELECT activity_log.id AS activity_log_id, activity_log.admin_id AS activity_log_admin_id, activity_log.company_id AS activity_log_company_id, activity_log.action AS activity_log_action, activity_log.details AS activity_log_details, activity_log.timestamp AS activity_log_timestamp, activity_log.member_id AS activity_log_member_id, activity_log.partner_id AS activity_log_partner_id, activity_log.offer_id AS activity_log_offer_id, activity_log.code_used AS activity_log_code_used, activity_log.result AS activity_log_result, activity_log.created_at AS activity_log_created_at, companies_1.id AS companies_1_id, companies_1.name AS companies_1_name, companies_1.description AS companies_1_description, companies_1.created_at AS companies_1_created_at, companies_1.owner_user_id AS companies_1_owner_user_id, companies_1.logo_url AS companies_1_logo_url, companies_1.notification_preferences AS companies_1_notification_preferences, companies_1.status AS companies_1_status, companies_1.admin_notes AS companies_1_admin_notes, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.password_hash AS users_1_password_hash, users_1.role AS users_1_role, users_1.is_active AS users_1_is_active, users_1.membership_level AS users_1_membership_level, users_1.joined_at AS users_1_joined_at, users_1.company_id AS users_1_company_id, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.password_hash AS users_2_password_hash, users_2.role AS users_2_role, users_2.is_active AS users_2_is_active, users_2.membership_level AS users_2_membership_level, users_2.joined_at AS users_2_joined_at, users_2.company_id AS users_2_company_id, companies_2.id AS companies_2_id, companies_2.name AS companies_2_name, companies_2.description AS companies_2_description, companies_2.created_at AS companies_2_created_at, companies_2.owner_user_id AS companies_2_owner_user_id, companies_2.logo_url AS companies_2_logo_url, companies_2.notification_preferences AS companies_2_notification_preferences, companies_2.status AS companies_2_status, companies_2.admin_notes AS companies_2_admin_notes, companies_3.id AS companies_3_id, companies_3.name AS companies_3_name, companies_3.description AS companies_3_description, companies_3.created_at AS companies_3_created_at, companies_3.owner_user_id AS companies_3_owner_user_id, companies_3.logo_url AS companies_3_logo_url, companies_3.notification_preferences AS companies_3_notification_preferences, companies_3.status AS companies_3_status, companies_3.admin_notes AS companies_3_admin_notes, users_3.id AS users_3_id, users_3.username AS users_3_username, users_3.email AS users_3_email, users_3.password_hash AS users_3_password_hash, users_3.role AS users_3_role, users_3.is_active AS users_3_is_active, users_3.membership_level AS users_3_membership_level, users_3.joined_at AS users_3_joined_at, users_3.company_id AS users_3_company_id, users_4.id AS users_4_id, users_4.username AS users_4_username, users_4.email AS users_4_email, users_4.password_hash AS users_4_password_hash, users_4.role AS users_4_role, users_4.is_active AS users_4_is_active, users_4.membership_level AS users_4_membership_level, users_4.joined_at AS users_4_joined_at, users_4.company_id AS users_4_company_id, companies_4.id AS companies_4_id, companies_4.name AS companies_4_name, companies_4.description AS companies_4_description, companies_4.created_at AS companies_4_created_at, companies_4.owner_user_id AS companies_4_owner_user_id, companies_4.logo_url AS companies_4_logo_url, companies_4.notification_preferences AS companies_4_notification_preferences, companies_4.status AS companies_4_status, companies_4.admin_notes AS companies_4_admin_notes, offers_1.id AS offers_1_id, offers_1.title AS offers_1_title, offers_1.description AS offers_1_description, offers_1.base_discount AS offers_1_base_discount, offers_1.status AS offers_1_status, offers_1.start_date AS offers_1_start_date, offers_1.valid_until AS offers_1_valid_until, offers_1.image_url AS offers_1_image_url, offers_1.company_id AS offers_1_company_id, offers_1.created_at AS offers_1_created_at \nFROM activity_log LEFT OUTER JOIN users AS users_1 ON users_1.id = activity_log.admin_id LEFT OUTER JOIN companies AS companies_1 ON companies_1.id = users_1.company_id LEFT OUTER JOIN companies AS companies_2 ON companies_2.id = activity_log.company_id LEFT OUTER JOIN users AS users_2 ON users_2.id = companies_2.owner_user_id LEFT OUTER JOIN users AS users_3 ON users_3.id = activity_log.member_id LEFT OUTER JOIN companies AS companies_3 ON companies_3.id = users_3.company_id LEFT OUTER JOIN companies AS companies_4 ON companies_4.id = activity_log.partner_id LEFT OUTER JOIN users AS users_4 ON users_4.id = companies_4.owner_user_id LEFT OUTER JOIN offers AS offers_1 ON offers_1.id = activity_log.offer_id \nWHERE activity_log.action = %(action_1)s AND activity_log.partner_id = %(partner_id_1)s AND activity_log.code_used = %(code_used_1)s AND activity_log.result IN (%(result_1_1)s, %(result_1_2)s) AND activity_log.created_at >= %(created_at_1)s AND activity_log.created_at <= %(created_at_2)s AND activity_log.member_id = %(member_id_1)s AND activity_log.offer_id = %(offer_id_1)s \n LIMIT %(param_1)s FOR UPDATE]\n[parameters: {'action_1': 'usage_code_attempt', 'partner_id_1': 8, 'code_used_1': '1742', 'created_at_1': datetime.datetime(2026, 1, 14, 5, 47, 14, 20990), 'created_at_2': datetime.datetime(2026, 1, 14, 5, 52, 14, 20990), 'member_id_1': 20, 'offer_id_1': 3, 'param_1': 1, 'result_1_1': 'valid', 'result_1_2': 'success'}]\n(Background on this error at: https://sqlalche.me/e/20/tw8g)", "request_id": "7e2c36c5714a4201b18206c9c6eb9fc5"}, "error": {"message": "(psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join\n\n[SQL: SELECT activity_log.id AS activity_log_id, activity_log.admin_id AS activity_log_admin_id, activity_log.company_id AS activity_log_company_id, activity_log.action AS activity_log_action, activity_log.details AS activity_log_details, activity_log.timestamp AS activity_log_timestamp, activity_log.member_id AS activity_log_member_id, activity_log.partner_id AS activity_log_partner_id, activity_log.offer_id AS activity_log_offer_id, activity_log.code_used AS activity_log_code_used, activity_log.result AS activity_log_result, activity_log.created_at AS activity_log_created_at, companies_1.id AS companies_1_id, companies_1.name AS companies_1_name, companies_1.description AS companies_1_description, companies_1.created_at AS companies_1_created_at, companies_1.owner_user_id AS companies_1_owner_user_id, companies_1.logo_url AS companies_1_logo_url, companies_1.notification_preferences AS companies_1_notification_preferences, companies_1.status AS companies_1_status, companies_1.admin_notes AS companies_1_admin_notes, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.password_hash AS users_1_password_hash, users_1.role AS users_1_role, users_1.is_active AS users_1_is_active, users_1.membership_level AS users_1_membership_level, users_1.joined_at AS users_1_joined_at, users_1.company_id AS users_1_company_id, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.password_hash AS users_2_password_hash, users_2.role AS users_2_role, users_2.is_active AS users_2_is_active, users_2.membership_level AS users_2_membership_level, users_2.joined_at AS users_2_joined_at, users_2.company_id AS users_2_company_id, companies_2.id AS companies_2_id, companies_2.name AS companies_2_name, companies_2.description AS companies_2_description, companies_2.created_at AS companies_2_created_at, companies_2.owner_user_id AS companies_2_owner_user_id, companies_2.logo_url AS companies_2_logo_url, companies_2.notification_preferences AS companies_2_notification_preferences, companies_2.status AS companies_2_status, companies_2.admin_notes AS companies_2_admin_notes, companies_3.id AS companies_3_id, companies_3.name AS companies_3_name, companies_3.description AS companies_3_description, companies_3.created_at AS companies_3_created_at, companies_3.owner_user_id AS companies_3_owner_user_id, companies_3.logo_url AS companies_3_logo_url, companies_3.notification_preferences AS companies_3_notification_preferences, companies_3.status AS companies_3_status, companies_3.admin_notes AS companies_3_admin_notes, users_3.id AS users_3_id, users_3.username AS users_3_username, users_3.email AS users_3_email, users_3.password_hash AS users_3_password_hash, users_3.role AS users_3_role, users_3.is_active AS users_3_is_active, users_3.membership_level AS users_3_membership_level, users_3.joined_at AS users_3_joined_at, users_3.company_id AS users_3_company_id, users_4.id AS users_4_id, users_4.username AS users_4_username, users_4.email AS users_4_email, users_4.password_hash AS users_4_password_hash, users_4.role AS users_4_role, users_4.is_active AS users_4_is_active, users_4.membership_level AS users_4_membership_level, users_4.joined_at AS users_4_joined_at, users_4.company_id AS users_4_company_id, companies_4.id AS companies_4_id, companies_4.name AS companies_4_name, companies_4.description AS companies_4_description, companies_4.created_at AS companies_4_created_at, companies_4.owner_user_id AS companies_4_owner_user_id, companies_4.logo_url AS companies_4_logo_url, companies_4.notification_preferences AS companies_4_notification_preferences, companies_4.status AS companies_4_status, companies_4.admin_notes AS companies_4_admin_notes, offers_1.id AS offers_1_id, offers_1.title AS offers_1_title, offers_1.description AS offers_1_description, offers_1.base_discount AS offers_1_base_discount, offers_1.status AS offers_1_status, offers_1.start_date AS offers_1_start_date, offers_1.valid_until AS offers_1_valid_until, offers_1.image_url AS offers_1_image_url, offers_1.company_id AS offers_1_company_id, offers_1.created_at AS offers_1_created_at \nFROM activity_log LEFT OUTER JOIN users AS users_1 ON users_1.id = activity_log.admin_id LEFT OUTER JOIN companies AS companies_1 ON companies_1.id = users_1.company_id LEFT OUTER JOIN companies AS companies_2 ON companies_2.id = activity_log.company_id LEFT OUTER JOIN users AS users_2 ON users_2.id = companies_2.owner_user_id LEFT OUTER JOIN users AS users_3 ON users_3.id = activity_log.member_id LEFT OUTER JOIN companies AS companies_3 ON companies_3.id = users_3.company_id LEFT OUTER JOIN companies AS companies_4 ON companies_4.id = activity_log.partner_id LEFT OUTER JOIN users AS users_4 ON users_4.id = companies_4.owner_user_id LEFT OUTER JOIN offers AS offers_1 ON offers_1.id = activity_log.offer_id \nWHERE activity_log.action = %(action_1)s AND activity_log.partner_id = %(partner_id_1)s AND activity_log.code_used = %(code_used_1)s AND activity_log.result IN (%(result_1_1)s, %(result_1_2)s) AND activity_log.created_at >= %(created_at_1)s AND activity_log.created_at <= %(created_at_2)s AND activity_log.member_id = %(member_id_1)s AND activity_log.offer_id = %(offer_id_1)s \n LIMIT %(param_1)s FOR UPDATE]\n[parameters: {'action_1': 'usage_code_attempt', 'partner_id_1': 8, 'code_used_1': '1742', 'created_at_1': datetime.datetime(2026, 1, 14, 5, 47, 14, 20990), 'created_at_2': datetime.datetime(2026, 1, 14, 5, 52, 14, 20990), 'member_id_1': 20, 'offer_id_1': 3, 'param_1': 1, 'result_1_1': 'valid', 'result_1_2': 'success'}]\n(Background on this error at: https://sqlalche.me/e/20/tw8g)", "request_id": "7e2c36c5714a4201b18206c9c6eb9fc5"}, "redirect": null, "response_size": 5882}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_capture_exception", "line": 142, "message": "error_handler"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/api/usage-codes/verify"}, "normalization": [], "timing": {"total_ms": 80, "middleware_ms": 27, "service_ms": 0, "route_ms": 50}, "response_status": 500, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-14T05:47:24.315318Z", "level": "INFO", "message": "192.168.10.41 - - [14/Jan/2026 08:47:24] \"\u001b[35m\u001b[1mPOST /api/usage-codes/verify HTTP/1.1\u001b[0m\" 500 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
{"timestamp": null, "level": "ERROR", "message": "request_cycle", "request_id": "c129a30414434b69986d5b9c7f29baa3", "trace_id": "388b25fcee4b418eb7ea9a936b9a1ce1", "parent_id": null, "user_id": null, "path": "/api/usage-codes/verify", "method": "POST", "incoming_payload": {"json": {"offer_id": 3, "code": "1742"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "28", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 3, "code": "1742"}}, "normalized_payload": {"json": {"offer_id": 3, "code": "1742"}, "form": {}, "query": {}, "combined": {"offer_id": 3, "code": "1742"}, "normalization": []}, "cleaned_payload": {"offer_id": 3, "code": "1742", "__original": {"json": {"offer_id": 3, "code": "1742"}, "form": {}, "query": {}, "headers": {"Host": "192.168.10.31:5000", "Connection": "keep-alive", "Content-Length": "28", "X-Requested-With": "XMLHttpRequest", "User-Agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36", "Dnt": "1", "Content-Type": "application/json", "Accept": "*/*", "Origin": "http://192.168.10.31:5000", "Referer": "http://192.168.10.31:5000/portal/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9"}, "combined": {"offer_id": 3, "code": "1742"}}, "__normalized": {"json": {"offer_id": 3, "code": "1742"}, "form": {}, "query": {}, "combined": {"offer_id": 3, "code": "1742"}, "normalization": []}, "__diagnostics": {"normalization": [], "sources": ["json"]}}, "outgoing_payload": {"status_code": 500, "json": {"message": "(psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join\n\n[SQL: SELECT activity_log.id AS activity_log_id, activity_log.admin_id AS activity_log_admin_id, activity_log.company_id AS activity_log_company_id, activity_log.action AS activity_log_action, activity_log.details AS activity_log_details, activity_log.timestamp AS activity_log_timestamp, activity_log.member_id AS activity_log_member_id, activity_log.partner_id AS activity_log_partner_id, activity_log.offer_id AS activity_log_offer_id, activity_log.code_used AS activity_log_code_used, activity_log.result AS activity_log_result, activity_log.created_at AS activity_log_created_at, companies_1.id AS companies_1_id, companies_1.name AS companies_1_name, companies_1.description AS companies_1_description, companies_1.created_at AS companies_1_created_at, companies_1.owner_user_id AS companies_1_owner_user_id, companies_1.logo_url AS companies_1_logo_url, companies_1.notification_preferences AS companies_1_notification_preferences, companies_1.status AS companies_1_status, companies_1.admin_notes AS companies_1_admin_notes, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.password_hash AS users_1_password_hash, users_1.role AS users_1_role, users_1.is_active AS users_1_is_active, users_1.membership_level AS users_1_membership_level, users_1.joined_at AS users_1_joined_at, users_1.company_id AS users_1_company_id, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.password_hash AS users_2_password_hash, users_2.role AS users_2_role, users_2.is_active AS users_2_is_active, users_2.membership_level AS users_2_membership_level, users_2.joined_at AS users_2_joined_at, users_2.company_id AS users_2_company_id, companies_2.id AS companies_2_id, companies_2.name AS companies_2_name, companies_2.description AS companies_2_description, companies_2.created_at AS companies_2_created_at, companies_2.owner_user_id AS companies_2_owner_user_id, companies_2.logo_url AS companies_2_logo_url, companies_2.notification_preferences AS companies_2_notification_preferences, companies_2.status AS companies_2_status, companies_2.admin_notes AS companies_2_admin_notes, companies_3.id AS companies_3_id, companies_3.name AS companies_3_name, companies_3.description AS companies_3_description, companies_3.created_at AS companies_3_created_at, companies_3.owner_user_id AS companies_3_owner_user_id, companies_3.logo_url AS companies_3_logo_url, companies_3.notification_preferences AS companies_3_notification_preferences, companies_3.status AS companies_3_status, companies_3.admin_notes AS companies_3_admin_notes, users_3.id AS users_3_id, users_3.username AS users_3_username, users_3.email AS users_3_email, users_3.password_hash AS users_3_password_hash, users_3.role AS users_3_role, users_3.is_active AS users_3_is_active, users_3.membership_level AS users_3_membership_level, users_3.joined_at AS users_3_joined_at, users_3.company_id AS users_3_company_id, users_4.id AS users_4_id, users_4.username AS users_4_username, users_4.email AS users_4_email, users_4.password_hash AS users_4_password_hash, users_4.role AS users_4_role, users_4.is_active AS users_4_is_active, users_4.membership_level AS users_4_membership_level, users_4.joined_at AS users_4_joined_at, users_4.company_id AS users_4_company_id, companies_4.id AS companies_4_id, companies_4.name AS companies_4_name, companies_4.description AS companies_4_description, companies_4.created_at AS companies_4_created_at, companies_4.owner_user_id AS companies_4_owner_user_id, companies_4.logo_url AS companies_4_logo_url, companies_4.notification_preferences AS companies_4_notification_preferences, companies_4.status AS companies_4_status, companies_4.admin_notes AS companies_4_admin_notes, offers_1.id AS offers_1_id, offers_1.title AS offers_1_title, offers_1.description AS offers_1_description, offers_1.base_discount AS offers_1_base_discount, offers_1.status AS offers_1_status, offers_1.start_date AS offers_1_start_date, offers_1.valid_until AS offers_1_valid_until, offers_1.image_url AS offers_1_image_url, offers_1.company_id AS offers_1_company_id, offers_1.created_at AS offers_1_created_at \nFROM activity_log LEFT OUTER JOIN users AS users_1 ON users_1.id = activity_log.admin_id LEFT OUTER JOIN companies AS companies_1 ON companies_1.id = users_1.company_id LEFT OUTER JOIN companies AS companies_2 ON companies_2.id = activity_log.company_id LEFT OUTER JOIN users AS users_2 ON users_2.id = companies_2.owner_user_id LEFT OUTER JOIN users AS users_3 ON users_3.id = activity_log.member_id LEFT OUTER JOIN companies AS companies_3 ON companies_3.id = users_3.company_id LEFT OUTER JOIN companies AS companies_4 ON companies_4.id = activity_log.partner_id LEFT OUTER JOIN users AS users_4 ON users_4.id = companies_4.owner_user_id LEFT OUTER JOIN offers AS offers_1 ON offers_1.id = activity_log.offer_id \nWHERE activity_log.action = %(action_1)s AND activity_log.partner_id = %(partner_id_1)s AND activity_log.code_used = %(code_used_1)s AND activity_log.result IN (%(result_1_1)s, %(result_1_2)s) AND activity_log.created_at >= %(created_at_1)s AND activity_log.created_at <= %(created_at_2)s AND activity_log.member_id = %(member_id_1)s AND activity_log.offer_id = %(offer_id_1)s \n LIMIT %(param_1)s FOR UPDATE]\n[parameters: {'action_1': 'usage_code_attempt', 'partner_id_1': 8, 'code_used_1': '1742', 'created_at_1': datetime.datetime(2026, 1, 14, 5, 47, 14, 20990), 'created_at_2': datetime.datetime(2026, 1, 14, 5, 52, 14, 20990), 'member_id_1': 20, 'offer_id_1': 3, 'param_1': 1, 'result_1_1': 'valid', 'result_1_2': 'success'}]\n(Background on this error at: https://sqlalche.me/e/20/tw8g)", "request_id": "c129a30414434b69986d5b9c7f29baa3"}, "error": {"message": "(psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join\n\n[SQL: SELECT activity_log.id AS activity_log_id, activity_log.admin_id AS activity_log_admin_id, activity_log.company_id AS activity_log_company_id, activity_log.action AS activity_log_action, activity_log.details AS activity_log_details, activity_log.timestamp AS activity_log_timestamp, activity_log.member_id AS activity_log_member_id, activity_log.partner_id AS activity_log_partner_id, activity_log.offer_id AS activity_log_offer_id, activity_log.code_used AS activity_log_code_used, activity_log.result AS activity_log_result, activity_log.created_at AS activity_log_created_at, companies_1.id AS companies_1_id, companies_1.name AS companies_1_name, companies_1.description AS companies_1_description, companies_1.created_at AS companies_1_created_at, companies_1.owner_user_id AS companies_1_owner_user_id, companies_1.logo_url AS companies_1_logo_url, companies_1.notification_preferences AS companies_1_notification_preferences, companies_1.status AS companies_1_status, companies_1.admin_notes AS companies_1_admin_notes, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.password_hash AS users_1_password_hash, users_1.role AS users_1_role, users_1.is_active AS users_1_is_active, users_1.membership_level AS users_1_membership_level, users_1.joined_at AS users_1_joined_at, users_1.company_id AS users_1_company_id, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.password_hash AS users_2_password_hash, users_2.role AS users_2_role, users_2.is_active AS users_2_is_active, users_2.membership_level AS users_2_membership_level, users_2.joined_at AS users_2_joined_at, users_2.company_id AS users_2_company_id, companies_2.id AS companies_2_id, companies_2.name AS companies_2_name, companies_2.description AS companies_2_description, companies_2.created_at AS companies_2_created_at, companies_2.owner_user_id AS companies_2_owner_user_id, companies_2.logo_url AS companies_2_logo_url, companies_2.notification_preferences AS companies_2_notification_preferences, companies_2.status AS companies_2_status, companies_2.admin_notes AS companies_2_admin_notes, companies_3.id AS companies_3_id, companies_3.name AS companies_3_name, companies_3.description AS companies_3_description, companies_3.created_at AS companies_3_created_at, companies_3.owner_user_id AS companies_3_owner_user_id, companies_3.logo_url AS companies_3_logo_url, companies_3.notification_preferences AS companies_3_notification_preferences, companies_3.status AS companies_3_status, companies_3.admin_notes AS companies_3_admin_notes, users_3.id AS users_3_id, users_3.username AS users_3_username, users_3.email AS users_3_email, users_3.password_hash AS users_3_password_hash, users_3.role AS users_3_role, users_3.is_active AS users_3_is_active, users_3.membership_level AS users_3_membership_level, users_3.joined_at AS users_3_joined_at, users_3.company_id AS users_3_company_id, users_4.id AS users_4_id, users_4.username AS users_4_username, users_4.email AS users_4_email, users_4.password_hash AS users_4_password_hash, users_4.role AS users_4_role, users_4.is_active AS users_4_is_active, users_4.membership_level AS users_4_membership_level, users_4.joined_at AS users_4_joined_at, users_4.company_id AS users_4_company_id, companies_4.id AS companies_4_id, companies_4.name AS companies_4_name, companies_4.description AS companies_4_description, companies_4.created_at AS companies_4_created_at, companies_4.owner_user_id AS companies_4_owner_user_id, companies_4.logo_url AS companies_4_logo_url, companies_4.notification_preferences AS companies_4_notification_preferences, companies_4.status AS companies_4_status, companies_4.admin_notes AS companies_4_admin_notes, offers_1.id AS offers_1_id, offers_1.title AS offers_1_title, offers_1.description AS offers_1_description, offers_1.base_discount AS offers_1_base_discount, offers_1.status AS offers_1_status, offers_1.start_date AS offers_1_start_date, offers_1.valid_until AS offers_1_valid_until, offers_1.image_url AS offers_1_image_url, offers_1.company_id AS offers_1_company_id, offers_1.created_at AS offers_1_created_at \nFROM activity_log LEFT OUTER JOIN users AS users_1 ON users_1.id = activity_log.admin_id LEFT OUTER JOIN companies AS companies_1 ON companies_1.id = users_1.company_id LEFT OUTER JOIN companies AS companies_2 ON companies_2.id = activity_log.company_id LEFT OUTER JOIN users AS users_2 ON users_2.id = companies_2.owner_user_id LEFT OUTER JOIN users AS users_3 ON users_3.id = activity_log.member_id LEFT OUTER JOIN companies AS companies_3 ON companies_3.id = users_3.company_id LEFT OUTER JOIN companies AS companies_4 ON companies_4.id = activity_log.partner_id LEFT OUTER JOIN users AS users_4 ON users_4.id = companies_4.owner_user_id LEFT OUTER JOIN offers AS offers_1 ON offers_1.id = activity_log.offer_id \nWHERE activity_log.action = %(action_1)s AND activity_log.partner_id = %(partner_id_1)s AND activity_log.code_used = %(code_used_1)s AND activity_log.result IN (%(result_1_1)s, %(result_1_2)s) AND activity_log.created_at >= %(created_at_1)s AND activity_log.created_at <= %(created_at_2)s AND activity_log.member_id = %(member_id_1)s AND activity_log.offer_id = %(offer_id_1)s \n LIMIT %(param_1)s FOR UPDATE]\n[parameters: {'action_1': 'usage_code_attempt', 'partner_id_1': 8, 'code_used_1': '1742', 'created_at_1': datetime.datetime(2026, 1, 14, 5, 47, 14, 20990), 'created_at_2': datetime.datetime(2026, 1, 14, 5, 52, 14, 20990), 'member_id_1': 20, 'offer_id_1': 3, 'param_1': 1, 'result_1_1': 'valid', 'result_1_2': 'success'}]\n(Background on this error at: https://sqlalche.me/e/20/tw8g)", "request_id": "c129a30414434b69986d5b9c7f29baa3"}, "redirect": null, "response_size": 5882}, "breadcrumbs": [{"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 67, "message": "before_request:start"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 71, "message": "cleaning:raw_extracted"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 74, "message": "cleaning:url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 75, "message": "cleaning:frontend_backend_url_normalized"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_start_observation", "line": 80, "message": "cleaning:cleaned_data_built"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 128, "message": "validation:url_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\core\\validation\\validator.py", "function": "validate", "line": 133, "message": "validation:choices_validated"}, {"file": "e:\\hazem\\programing\\python\\projects\\ELITE\\app\\logging\\middleware.py", "function": "_capture_exception", "line": 142, "message": "error_handler"}], "validation": {"is_valid": true, "missing_fields": [], "invalid_urls": [], "invalid_choices": [], "too_large": [], "errors": [], "source": "/api/usage-codes/verify"}, "normalization": [], "timing": {"total_ms": 40, "middleware_ms": 26, "service_ms": 0, "route_ms": 10}, "response_status": 500, "file": "middleware.py", "function": "_emit_final_log", "line": 200}
{"timestamp": "2026-01-14T05:47:31.184288Z", "level": "INFO", "message": "192.168.10.41 - - [14/Jan/2026 08:47:31] \"\u001b[35m\u001b[1mPOST /api/usage-codes/verify HTTP/1.1\u001b[0m\" 500 -", "file": "_internal.py", "function": "_log", "line": 97, "request_id": null, "user_id": null, "path": null, "method": null}
