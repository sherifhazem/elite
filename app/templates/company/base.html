<!-- Company portal base layout with sidebar navigation and desktop-first styling. -->
{% extends "base.html" %}

{% block extra_head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/company.css') }}">
{% endblock %}

{% block content %}
    <div class="company-portal d-flex">
        <aside class="company-sidebar">
            <div class="company-brand text-center mb-4">
                {% if company and company.logo_url %}
                    <img src="{{ company.logo_url }}" alt="{{ company.name }} logo" class="company-logo mb-2">
                {% else %}
                    <div class="company-logo placeholder-logo mb-2">{{ company.name[:1] if company else 'C' }}</div>
                {% endif %}
                <h2 class="h5 mb-0">{{ company.name if company else 'Company' }}</h2>
                <small class="text-muted">Business Console</small>
            </div>
            <nav class="nav flex-column">
                {% set current_path = request.path %}
                <a class="nav-link {{ 'active' if current_path.startswith(url_for('company_portal_bp.dashboard')) else '' }}" href="{{ url_for('company_portal_bp.dashboard') }}">
                    Dashboard
                </a>
                <a class="nav-link {{ 'active' if current_path.startswith(url_for('company_portal_bp.offers')) else '' }}" href="{{ url_for('company_portal_bp.offers') }}">
                    Offers
                </a>
                <a class="nav-link {{ 'active' if current_path.startswith(url_for('company_portal_bp.redemptions')) else '' }}" href="{{ url_for('company_portal_bp.redemptions') }}">
                    Redemptions
                </a>
                <a class="nav-link {{ 'active' if current_path.startswith(url_for('company_portal_bp.settings')) else '' }}" href="{{ url_for('company_portal_bp.settings') }}">
                    Settings
                </a>
            </nav>
        </aside>
        <main class="company-main flex-grow-1">
            <header class="company-topbar d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="h4 mb-0">{% block portal_title %}Company Portal{% endblock %}</h1>
                    <p class="text-muted small mb-0">Manage offers, track redemptions, and configure company preferences.</p>
                </div>
                <div class="text-end">
                    <span class="fw-semibold">{{ current_user.username if current_user else '' }}</span>
                    <div class="text-muted small">{{ current_user.email if current_user else '' }}</div>
                </div>
            </header>
            <section class="company-content">
                {% block portal_content %}{% endblock %}
            </section>
        </main>
    </div>
{% endblock %}

{% block extra_scripts %}
    {{ super() }}
    {% block portal_scripts %}{% endblock %}
{% endblock %}
